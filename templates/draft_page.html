
{% extends 'base.html' %}
{% block content %}

<script src="https://code.jquery.com/jquery.js"></script>

<!-- Check to see if in drafts; if not, save -->
<body>
{% if session.get('user_id') %} <!-- Query for draft in drafts -->
    <form action="/save_draft" method="POST" id="save_draft">
        <div>
            <label for="title_field"> Title </label>
            <input id="title_field" type="text" class="draft-control">
        </div>
        <div> 
            <label for="draft_field"> Draft </label>
            <input id="draft_field" type="text" class="draft-control">
        </div> 
            <input id="save_btn" type="submit" name="Save">
    </form>
{% endif %}

{% if session.get('draft_id') %}
    <form action="/publish_draft" method="POST" id="publish_draft">
        <input type="hidden" name="draft_id" value="{{ 'draft_id' }}">
        <input type="submit" value="Publish">
    </form>
{% endif %}


       
 <style>
 #previousDrafts {
    border: 1px solid black;
    margin-bottom: 10px;
 }
</style>
<p>List of previous drafts</p>
<div id="previousDrafts">
    Previous Drafts
</div>

<script src="/static/display_old_drafts.js"></script>











<!-- 
        //gets all the drafts saved
        $.get("/drafts",
        function (data) {
            console.log(data);
        });

        $.get("/drafts",
            $()

            )

        //gets one draft based on book_id
        $.get("/draft/<int:id>"),
        function (data) {
            console.log(data)
        }


        // function publishDoc(evt) {
        $('.draft-control').ready(function() {
            console.log("adding event handler");
            $('#save').click(function(evt) {
                debugger;


                evt.preventDefault();
                console.log("you clicked save");
                $.post("/draft/",
                    {
                        title: $('#title_field').val(),
                        draft: $('#draft_field').val()
                    },


                    function (data) {
                        console.log("successfully saved");
                        $('#save-draft').text('Your draft is now saved!');
                        // $('publish').attr('disabled', true);
                    });
        });
    });
// }

        // $('.draft-control').on('click', publishDoc); -->





</body>

{% endblock %}

